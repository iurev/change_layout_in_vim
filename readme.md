## Для чего это нужно?

Если у вас было так при работе с VIM:

> > ввоннЗ.ешеду
>
> Черт! Твою ж медь! Опять!
>
> > ddjyyP/title

то этот скрипт для вас. Аналогичная ситуация, если у вас есть скрипт:

> > в
>

*в работу вступает скрипт, меняет системную раскладку на английскую и печатает букву в как d*

>
> > djyyP/title
>
> :)

Словами:

* это нужно тем, кто использует русскую раскладку
* если включена системная русская раскладка при работе в VIM, скрипт автоматически переключает системную раскладку на английскую
* введенные при активной русской раскладке команды транслирует в комманды на английском и исполняет; то есть, вам не придется выполнять второй раз команду, введенную на русском языке

## Что у меня для этого должно быть?
* ОС _GNU/Linux_ с графическим интерфейсом
* установленная программа _xmacro_
* _VIM_

## Как установить?

* установить линукс :)
* установить _xmacro_:

```
apt-get install xmacro
```

или

```
yum install xmacro
```

или

```
вы сами знаете как :)
```

* скачать [ZIP-файл](https://github.com/wwju/change_layout_in_vim/archive/master.zip "Архив со скриптами") и распаковать его содержимое в домашнюю директорию
* или скачать при помощи git:

```
git clone https://github.com/wwju/change_layout_in_vim.git
```

в результате у вас должна быть папка

```
~/.change_layout
```

* переходим в папку _~/.change_layout_ и даем права на исполнение двум скриптам, которые содержатся в этой папке:

```
cd ~/.change_layout
chmod +x cl.sh
```

* устанавливаем сочетание клавиш для смены раскладки

*(если вы используете для переключения раскладки правый альт, то вам нужно пропустить этот шаг)*

в терминале запускаем:

```
xmacrorec2
```

жмем _esc_

жмем сочетание клавиш, которое вы используете для смены раскладки

жмем _esc_

у вас в терминале должно появиться что-либо наподобие:

```
>>xmacrorec2
Server VendorRelease: 11300000
XRecord for server ":0" is version 1.13.


Press the key you want to use to end the application. This key can be any key, 
as long as you don't need it while working with the remote display.
A good choice is Escape.

The chosen quit-key has the keycode: 9
XQueryPointer returned: 1
Got Start Of Data
Skipping...
- Skipping stale KeyRelease event. 1
MotionNotify 391 570
KeyStrPress ISO_Next_Group
KeyStrRelease ISO_Next_Group
^[Got QuitKey, so exiting...
xmacrorec2: Exiting. 
```

то что у вас получилось вместо _ISO_Next_Group_, вы должны вставить в файл _change_layout.sh_ вместо _ISO_Next_Group_:

скопируйте содержимое файла _vimrc_ в свой .vimrc

## Как использовать?

Очень просто - вы уже все настроили, и теперь скрипт будет работать автоматически без всякого вмешательства.

## Как это работает?

```
map в :!~/.change_layout/cl.sh<CR><CR>d
```

при нажатии на букву _в_ в русской раскладке запускается скрипт, иммитирующий нажатие клавиши _левый альт_, которая у меня меняет раскладку, после печатается английская буква _d_

## Есть ли подводные камни, недостатки?

а как же без них? 

* я не смог наладить смену раскладки на сочетания клавиш и на нажатие _Ж_, _,_, _._ (двоеточие, запятая и точка), которые в VIM запускают строку для ввода комманд или поиска. 
* скрипт не работает в других ОС, но, думаю, в _MAC OS X_ есть аналог _xmacro_
* при смене раскладки _VIM_ мигнет
